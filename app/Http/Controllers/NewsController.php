<?php

namespace App\Http\Controllers;

use Illuminate\Http\Request;
use Inertia\Inertia;

class NewsController extends Controller
{
    // Массив новостей (временное решение, пока не перенесете данные в базу)
    private $news = [];

    public function __construct()
    {
        // Инициализация данных о новостях
        $this->news = [
            1 => [
                'id' => 1,
                'title' => 'Мініатюрні деталі які якісно доповнять ваш користувацький досвід',
                'description' => 'Адаптер перехідник Colorway Type-C до USB-A – це мініатюрний адаптер, який дає можливість заряджати смартфони та планшети',
                'date' => '10.10.2024',
                'isNew' => true,
                'image' => [
                    'default' => 'assets/images/news-01.jpg',
                    'mobile' => 'assets/images/news-01-mobile.jpg',
                    'tablet' => 'assets/images/news-01-tablet.jpg',
                    'desktop' => 'assets/images/news-01-desktop.jpg'
                ],
                'content' => '<p>Адаптер перехідник Colorway Type-C до USB-A – це мініатюрний адаптер, який дає можливість заряджати смартфони та планшети. З цим перехідником ви зможете використовувати звичайний кабель Type-A для зарядки пристроїв з роз\'ємом Type-C.</p>
                <p>Компактний розмір адаптера дозволяє легко брати його з собою в поїздки, а міцний корпус забезпечує тривалий термін служби. Забудьте про незручності, пов\'язані з несумісністю кабелів і пристроїв!</p>
                <h2>Особливості та переваги</h2>
                <ul>
                    <li>Компактний розмір для зручного перенесення</li>
                    <li>Висока швидкість передачі даних</li>
                    <li>Підтримка швидкісної зарядки</li>
                    <li>Надійний металевий корпус</li>
                    <li>Універсальна сумісність з пристроями Type-C</li>
                </ul>
                <p>Купуйте адаптер-перехідник Colorway Type-C до USB-A і насолоджуйтесь зручністю використання ваших пристроїв без обмежень!</p>'
            ],
            2 => [
                'id' => 2,
                'title' => 'Нова лінійка портативних акумуляторів з підтримкою швидкої зарядки',
                'description' => 'Зустрічайте нову лінійку портативних акумуляторів Colorway з підтримкою технологій Quick Charge та Power Delivery',
                'date' => '05.10.2024',
                'isNew' => true,
                'image' => [
                    'default' => 'assets/images/news-02.jpg',
                    'mobile' => 'assets/images/news-02-mobile.jpg',
                    'tablet' => 'assets/images/news-02-tablet.jpg',
                    'desktop' => 'assets/images/news-02-desktop.jpg'
                ],
                'content' => '<p>Компанія ColorWay представляє нову лінійку портативних акумуляторів з підтримкою сучасних технологій швидкої зарядки. Нові моделі підтримують Quick Charge 4.0 та Power Delivery 3.0, що дозволяє заряджати сумісні пристрої до 70% всього за 30 хвилин.</p>
                <p>Ємність нових портативних акумуляторів складає від 10000 до 20000 мАг, що дозволяє зарядити смартфон до 5 разів. Крім того, нові моделі підтримують одночасну зарядку декількох пристроїв завдяки наявності декількох USB-портів та USB Type-C.</p>
                <h2>Ключові особливості нової лінійки:</h2>
                <ul>
                    <li>Підтримка технологій швидкої зарядки Quick Charge 4.0 та Power Delivery 3.0</li>
                    <li>Ємність від 10000 до 20000 мАг</li>
                    <li>Компактний розмір та стильний дизайн</li>
                    <li>LED-індикатор заряду</li>
                    <li>Декілька USB-портів для одночасної зарядки пристроїв</li>
                    <li>Захист від перезарядки, короткого замикання та перегріву</li>
                </ul>
                <p>Нова лінійка портативних акумуляторів ColorWay вже доступна в офіційному магазині та у авторизованих дилерів.</p>'
            ],
            3 => [
                'id' => 3,
                'title' => 'Бездротові навушники ColorWay: новий рівень комфорту та якості звуку',
                'description' => 'Представляємо нову модель бездротових навушників ColorWay з активним шумопоглинанням та підтримкою Bluetooth 5.3',
                'date' => '28.09.2024',
                'isNew' => true,
                'image' => [
                    'default' => 'assets/images/news-03.jpg',
                    'mobile' => 'assets/images/news-03-mobile.jpg',
                    'tablet' => 'assets/images/news-03-tablet.jpg',
                    'desktop' => 'assets/images/news-03-desktop.jpg'
                ],
                'content' => '<p>Представляємо нову модель бездротових навушників ColorWay з активним шумопоглинанням та підтримкою Bluetooth 5.3. Насолоджуйтесь чистим та глибоким звуком без сторонніх шумів.</p>
                <p>Навушники оснащені новітніми драйверами, які забезпечують якісне відтворення як високих, так і низьких частот. Активне шумопоглинання ефективно блокує до 95% зовнішніх шумів, дозволяючи вам зосередитись на улюбленій музиці або важливому дзвінку.</p>
                <h2>Основні характеристики:</h2>
                <ul>
                    <li>Bluetooth 5.3 для стабільного підключення</li>
                    <li>Активне шумопоглинання з можливістю налаштування</li>
                    <li>До 30 годин автономної роботи</li>
                    <li>Швидка зарядка: 10 хвилин = 2 години прослуховування</li>
                    <li>Зручне управління дотиком</li>
                    <li>Захист від вологи IPX5</li>
                </ul>'
            ],
            4 => [
                'id' => 4,
                'title' => 'Інноваційні рішення для очищення техніки від ColorWay',
                'description' => 'Нова серія професійних засобів для очищення екранів, клавіатур та інших поверхонь електронних пристроїв',
                'date' => '20.09.2024',
                'isNew' => false,
                'image' => [
                    'default' => 'assets/images/news-04.jpg',
                    'mobile' => 'assets/images/news-04-mobile.jpg',
                    'tablet' => 'assets/images/news-04-tablet.jpg',
                    'desktop' => 'assets/images/news-04-desktop.jpg'
                ],
                'content' => '<p>ColorWay представляє нову лінійку професійних засобів для очищення електронної техніки. Спеціальні формули ефективно видаляють пил, відбитки пальців та інші забруднення з екранів смартфонів, планшетів, ноутбуків та моніторів.</p>
                <p>Нова серія включає спреї, серветки та набори для комплексного догляду за технікою. Всі засоби не містять спирту та агресивних компонентів, що могли б пошкодити покриття пристроїв.</p>
                <h2>В асортименті новинок:</h2>
                <ul>
                    <li>Антибактеріальний спрей для очищення екранів</li>
                    <li>Вологі серветки для електроніки в індивідуальній упаковці</li>
                    <li>Набір для чищення клавіатур та важкодоступних місць</li>
                    <li>Мікрофіброві серветки багаторазового використання</li>
                </ul>
                <p>Підтримуйте вашу техніку в ідеальному стані з новими засобами від ColorWay!</p>'
            ],
            5 => [
                'id' => 5,
                'title' => 'Бездротові навушники ColorWay: новий рівень комфорту та якості звуку',
                'description' => 'Представляємо нову модель бездротових навушників ColorWay з активним шумопоглинанням та підтримкою Bluetooth 5.3',
                'date' => '28.09.2024',
                'isNew' => true,
                'image' => [
                    'default' => 'assets/images/news-03.jpg',
                    'mobile' => 'assets/images/news-03-mobile.jpg',
                    'tablet' => 'assets/images/news-03-tablet.jpg',
                    'desktop' => 'assets/images/news-03-desktop.jpg'
                ],
                'content' => '<p>Представляємо нову модель бездротових навушників ColorWay з активним шумопоглинанням та підтримкою Bluetooth 5.3. Насолоджуйтесь чистим та глибоким звуком без сторонніх шумів.</p>
                <p>Навушники оснащені новітніми драйверами, які забезпечують якісне відтворення як високих, так і низьких частот. Активне шумопоглинання ефективно блокує до 95% зовнішніх шумів, дозволяючи вам зосередитись на улюбленій музиці або важливому дзвінку.</p>
                <h2>Основні характеристики:</h2>
                <ul>
                    <li>Bluetooth 5.3 для стабільного підключення</li>
                    <li>Активне шумопоглинання з можливістю налаштування</li>
                    <li>До 30 годин автономної роботи</li>
                    <li>Швидка зарядка: 10 хвилин = 2 години прослуховування</li>
                    <li>Зручне управління дотиком</li>
                    <li>Захист від вологи IPX5</li>
                </ul>'
            ],
            6 => [
                'id' => 6,
                'title' => 'Нова лінійка портативних акумуляторів з підтримкою швидкої зарядки',
                'description' => 'Зустрічайте нову лінійку портативних акумуляторів Colorway з підтримкою технологій Quick Charge та Power Delivery',
                'date' => '05.10.2024',
                'isNew' => true,
                'image' => [
                    'default' => 'assets/images/news-02.jpg',
                    'mobile' => 'assets/images/news-02-mobile.jpg',
                    'tablet' => 'assets/images/news-02-tablet.jpg',
                    'desktop' => 'assets/images/news-02-desktop.jpg'
                ],
                'content' => '<p>Компанія ColorWay представляє нову лінійку портативних акумуляторів з підтримкою сучасних технологій швидкої зарядки. Нові моделі підтримують Quick Charge 4.0 та Power Delivery 3.0, що дозволяє заряджати сумісні пристрої до 70% всього за 30 хвилин.</p>
                <p>Ємність нових портативних акумуляторів складає від 10000 до 20000 мАг, що дозволяє зарядити смартфон до 5 разів. Крім того, нові моделі підтримують одночасну зарядку декількох пристроїв завдяки наявності декількох USB-портів та USB Type-C.</p>
                <h2>Ключові особливості нової лінійки:</h2>
                <ul>
                    <li>Підтримка технологій швидкої зарядки Quick Charge 4.0 та Power Delivery 3.0</li>
                    <li>Ємність від 10000 до 20000 мАг</li>
                    <li>Компактний розмір та стильний дизайн</li>
                    <li>LED-індикатор заряду</li>
                    <li>Декілька USB-портів для одночасної зарядки пристроїв</li>
                    <li>Захист від перезарядки, короткого замикання та перегріву</li>
                </ul>
                <p>Нова лінійка портативних акумуляторів ColorWay вже доступна в офіційному магазині та у авторизованих дилерів.</p>'
            ],
        ];
    }

    /**
     * Отображение списка новостей
     */
    public function index()
    {
        // Подготовка данных для фронтенда (адаптация форматов)
        $newsItems = array_values($this->news);

        // Добавляем ссылки к новостям
        foreach ($newsItems as &$item) {
            $item['link'] = "/news/{$item['id']}";
        }

        return Inertia::render('News', [
            'newsItems' => $newsItems
        ]);
    }

    /**
     * Отображение конкретной новости
     */
    public function show($id)
    {
        // Проверка существования новости
        if (!isset($this->news[$id])) {
            abort(404);
        }

        $newsItem = $this->news[$id];

        // Получаем связанные новости (максимум 3)
        $relatedNews = [];
        foreach ($this->news as $newsId => $news) {
            if ($newsId != $id) {
                $news['link'] = "/news/{$news['id']}";
                $relatedNews[] = $news;
                if (count($relatedNews) >= 3) break;
            }
        }

        return Inertia::render('NewsDetail', [
            'newsItem' => $newsItem,
            'relatedNews' => $relatedNews
        ]);
    }
}
